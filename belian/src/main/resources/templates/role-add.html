<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
	<meta charset="UTF-8"/>
	<title>Role Form</title>
	<th:block th:include="static"/>
	<th:block th:include="script"/>
	<script th:inline="javascript">
		/*<![CDATA[*/
			$(function(){
				$("#read").click(function(){

					if($(this).prop("checked"))
						$(".read").prop("checked",true);
					else
						$(".read").prop("checked",false);
				});
				
				$("#create").click(function(){
					if($(this).prop("checked"))
						$(".create").prop("checked",true);
					else
						$(".create").prop("checked",false);
				});
				
				$("#update").click(function(){
					if($(this).prop("checked"))
						$(".update").prop("checked",true);
					else
						$(".update").prop("checked",false);
				});
				
				$("#delete").click(function(){
					if($(this).prop("checked"))
						$(".delete").prop("checked",true);
					else
						$(".delete").prop("checked",false);
				});
				
				$("#print").click(function(){
					if($(this).prop("checked"))
						$(".print").prop("checked",true);
					else
						$(".print").prop("checked",false);
				});
			});
		/*]]>*/
	</script>
</head>
<body>
	<th:block th:include="menu"/>
	<div class="content ui-widget-content">
		<fieldset>
		<div class="rcrumbs" id="breadcrumbs">
        	<ul>
            	<li><a th:href="@{/roles/list}">List</a><span class="divider">></span></li>
            	<li><a>Form</a></li>
        	</ul>
        </div>
		<form class="pure-form pure-form-aligned" th:action="@{/roles/add}" method="post" th:object="${role}">
			<div class="pure-control-group">
				<label for="code">Code</label>
				<input type="text" th:field="*{code}"/>
			</div>
			<div class="pure-control-group">
				<label for="name">Name</label>
				<input type="text" th:field="*{name}"/>
			</div>
			<div class="pure-controls">
				<table class="pure-table pure-table-bordered pure-table-striped">
				<thead>
				<tr><th colspan="6">Module Access</th></tr>
				<tr>
					<th>Module</th>
					<th align="center">
						Create<br/>
						<input type="checkbox" id="create"/>
					</th>
					<th align="center">
						Read<br/>
						<input type="checkbox" id="read"/>
					</th>
					<th align="center">
						Update<br/>
						<input type="checkbox" id="update"/>
					</th>
					<th align="center">
						Delete<br/>
						<input type="checkbox" id="delete"/>
					</th>
					<th align="center">
						Print<br/>
						<input type="checkbox" id="print"/>
					</th>
				</tr>
				</thead>
				<tbody>
				<tr th:each="access,stat :*{accesses}">
					<td align="right">
						<th:block th:value="*{accesses[__${stat.index}__].module.id}" th:text="*{accesses[__${stat.index}__].module.name}"/>
						<input type="hidden" th:field="*{accesses[__${stat.index}__].id}" th:value="*{accesses[__${stat.index}__].id}"/>
						<input type="hidden" th:field="*{accesses[__${stat.index}__].module.id}" th:value="*{accesses[__${stat.index}__].module.id}"/>
					</td>
					<td align="center">
						<input class="create" type="checkbox" th:field="*{accesses[__${stat.index}__].canCreate}"/>
					</td>
					<td align="center">
						<input class="read" type="checkbox" th:field="*{accesses[__${stat.index}__].canRead}"/>
					</td>
					<td align="center">
						<input class="update" type="checkbox" th:field="*{accesses[__${stat.index}__].canUpdate}"/>
					</td>
					<td align="center">
						<input class="delete" type="checkbox" th:field="*{accesses[__${stat.index}__].canDelete}"/>
					</td>
					<td align="center">
						<input class="print" type="checkbox" th:field="*{accesses[__${stat.index}__].canPrint}"/>
					</td>
				</tr>
				</tbody>
				</table>
			</div>
			<div class="pure-controls">
				<input type="hidden" th:field="*{id}"/>
				<button type="submit" autofocus="autofocus" class="pure-button pure-button-primary">Save</button>
			</div>
		</form>
		</fieldset>
	</div>
</body>
</html>